[gd_scene load_steps=11 format=2]

[ext_resource path="res://models/boxguy/boxguy.tscn" type="PackedScene" id=1]
[ext_resource path="res://addons/followother/LookAtOther.gd" type="Script" id=2]
[ext_resource path="res://addons/followother/icon_tween.svg" type="Texture" id=3]
[ext_resource path="res://addons/followother/FollowOther.gd" type="Script" id=4]
[ext_resource path="res://addons/followother/ConstrainRotation.gd" type="Script" id=5]
[ext_resource path="res://addons/followother/icon_reparent.svg" type="Texture" id=6]
[ext_resource path="res://addons/inputcontrols/MouselookController.gd" type="Script" id=7]
[ext_resource path="res://addons/inputcontrols/icon_mouse.svg" type="Texture" id=8]

[sub_resource type="CylinderMesh" id=1]
top_radius = 0.001
bottom_radius = 0.05
height = 0.5

[sub_resource type="SphereMesh" id=2]
radius = 0.1
height = 0.2

[node name="DemoScene" type="Spatial"]

[node name="Boxguy" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, 1, 0, 0, 0 )

[node name="LookAtHeadTarget" type="Node" parent="Boxguy/Armature/Skeleton" index="12"]
script = ExtResource( 2 )
__meta__ = {
"_editor_icon": ExtResource( 3 )
}
enabled = true
parent_bone = "Head"
target_path = NodePath("../../../HeadFulcrum/HeadTarget")
interpolate_speed = 6.0
exorcist = false

[node name="AnimationTreePlayer" parent="Boxguy" index="2"]
data = {
"active": true,
"connections": [ "holistic joiner", "out", 0, "punch", "holistic joiner", 0, "leg stance", "holistic joiner", 1, "walk direction", "walk speed", 0, "sidestep anim", "sidestep sync", 0, "walk anim", "walk direction", 0, "sidestep sync", "walk direction", 1, "arm stance", "punch", 0, "punch speed", "punch", 1, "stand anim", "leg stance", 0, "walk speed", "leg stance", 1, "jab right", "punch speed", 0, "idle", "arm stance", 0, "guarded", "arm stance", 1 ],
"master": NodePath("../AnimationPlayer"),
"nodes": [ {
"filter": [  ],
"from": "idle",
"id": "idle",
"position": Vector2( 185, 13 ),
"type": "animation"
}, {
"id": "out",
"position": Vector2( 1084, 96 ),
"type": "output"
}, {
"id": "holistic joiner",
"mix": 1.0,
"position": Vector2( 924, 177 ),
"type": "mix"
}, {
"filter": [  ],
"from": "walk-loop",
"id": "walk anim",
"position": Vector2( 203, 475 ),
"type": "animation"
}, {
"filter": [  ],
"from": "h2h_jab_r",
"id": "jab right",
"position": Vector2( 181, 246 ),
"type": "animation"
}, {
"filter": [  ],
"from": "h2h_stance",
"id": "guarded",
"position": Vector2( 183, 125 ),
"type": "animation"
}, {
"id": "walk speed",
"position": Vector2( 654, 463 ),
"scale": 1.0,
"type": "timescale"
}, {
"id": "sidestep sync",
"position": Vector2( 346, 586 ),
"scale": 0.5,
"type": "timescale"
}, {
"filter": [  ],
"from": "stand",
"id": "stand anim",
"position": Vector2( 188, 366 ),
"type": "animation"
}, {
"blend": 0.3,
"filter": [  ],
"id": "walk direction",
"position": Vector2( 510, 501 ),
"type": "blend2"
}, {
"autorestart": false,
"autorestart_delay": 1.0,
"autorestart_random_delay": 0.999981,
"fade_in": 0.2,
"fade_out": 0.2,
"filter": [ NodePath("Armature/Skeleton:Shoulder.L"), NodePath("Armature/Skeleton:Elbow.L"), NodePath("Armature/Skeleton:Hand.L") ],
"id": "punch",
"mix": false,
"position": Vector2( 645, 114 ),
"type": "oneshot"
}, {
"id": "leg stance",
"position": Vector2( 779, 371 ),
"transitions": [ {
"auto_advance": false
}, {
"auto_advance": false
} ],
"type": "transition",
"xfade": 0.2
}, {
"id": "punch speed",
"position": Vector2( 441, 210 ),
"scale": 4.0,
"type": "timescale"
}, {
"id": "arm stance",
"position": Vector2( 437, 47 ),
"transitions": [ {
"auto_advance": false
}, {
"auto_advance": false
} ],
"type": "transition",
"xfade": 0.2
}, {
"filter": [  ],
"from": "sidestep-loop",
"id": "sidestep anim",
"position": Vector2( 177, 590 ),
"type": "animation"
} ]
}

[node name="HeadFulcrum" type="Spatial" parent="Boxguy"]
transform = Transform( 1.00003, 0, -8.74254e-08, 0, 1, 0, 8.74254e-08, 0, 1.00003, 0, 1.45, 0 )

[node name="HeadTarget" type="Spatial" parent="Boxguy/HeadFulcrum"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 2 )

[node name="MeshInstance" type="MeshInstance" parent="Boxguy/HeadFulcrum/HeadTarget"]
transform = Transform( 1, 0, 0, 0, -1.62921e-07, -1, 0, 1, -1.62921e-07, 0, 0, 0 )
mesh = SubResource( 1 )
material/0 = null

[node name="FollowViewFulcrum" type="Node" parent="Boxguy/HeadFulcrum"]
script = ExtResource( 4 )
__meta__ = {
"_editor_icon": ExtResource( 3 )
}
enabled = true
target_path = NodePath("../../../ViewFulcrum")

[node name="ConstrainRotation" type="Node" parent="Boxguy/HeadFulcrum"]
script = ExtResource( 5 )
__meta__ = {
"_editor_icon": ExtResource( 6 )
}
enabled = true
max_pitch_degrees = 80.0
max_yaw_degrees = 110.0
negative_z = false

[node name="ViewFulcrum" type="Spatial" parent="."]
transform = Transform( 1.00003, 0, 0, 0, 1, 0, 0, 0, 1.00003, 0, 1.45, 0 )

[node name="FollowBoxguyHead" type="Node" parent="ViewFulcrum"]
script = ExtResource( 4 )
__meta__ = {
"_editor_icon": ExtResource( 3 )
}
enabled = true
target_path = NodePath("../../Boxguy/Armature/Skeleton")
target_bone = "Head"
follow_rotation = false

[node name="MouselookController" type="Node" parent="ViewFulcrum"]
script = ExtResource( 7 )
__meta__ = {
"_editor_icon": ExtResource( 8 )
}
mouselook_scale = Vector2( 1, -1 )
max_pitch = 85.0

[node name="FocalPoint" type="Spatial" parent="ViewFulcrum"]
transform = Transform( 1, 0, 3.18323e-12, 0, 1, 0, -3.18323e-12, 0, 1, 0, 0, 10 )

[node name="MeshInstance" type="MeshInstance" parent="ViewFulcrum/FocalPoint"]
mesh = SubResource( 2 )
material/0 = null

[node name="Eyes" type="Spatial" parent="ViewFulcrum"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.25, -0.15 )

[node name="ThirdPersonFulcrum" type="Spatial" parent="ViewFulcrum"]
transform = Transform( -0.99997, -2.47176e-08, 3.20793e-07, 0, 0.997045, 0.0768238, -3.21744e-07, 0.0768215, -0.997015, 3.21469e-06, 0.769856, 0.00885118 )

[node name="ThirdPerson" type="Spatial" parent="ViewFulcrum/ThirdPersonFulcrum"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3 )

[node name="LookAtFocalPoint" type="Node" parent="ViewFulcrum/ThirdPersonFulcrum"]
script = ExtResource( 2 )
__meta__ = {
"_editor_icon": ExtResource( 3 )
}
enabled = true
target_path = NodePath("../../FocalPoint")

[node name="Camera" type="Camera" parent="."]
transform = Transform( -1, -2.47183e-08, 3.20803e-07, 0, 0.997045, 0.0768238, -3.21754e-07, 0.0768238, -0.997045, 4.1772e-06, 2.45033, -2.98228 )

[node name="FollowEyesOrThirdPerson" type="Node" parent="Camera"]
script = ExtResource( 4 )
__meta__ = {
"_editor_icon": ExtResource( 3 )
}
enabled = true
target_path = NodePath("../../ViewFulcrum/ThirdPersonFulcrum/ThirdPerson")

[editable path="Boxguy"]
